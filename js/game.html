<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jump Quest</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            font-family: 'Arial', sans-serif;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }

        .game-container {
            position: relative;
            border: 3px solid #333;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
            background: #000;
        }

        #gameCanvas {
            display: block;
            background: linear-gradient(180deg, #87CEEB 0%, #98FB98 50%, #90EE90 100%);
        }

        .ui-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 10;
        }

        .score {
            position: absolute;
            top: 20px;
            left: 20px;
            color: white;
            font-size: 24px;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
        }

        .game-over {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            display: none;
            pointer-events: all;
        }

        .game-over h2 {
            font-size: 36px;
            margin-bottom: 20px;
            color: #ff6b6b;
        }

        .game-over p {
            font-size: 18px;
            margin-bottom: 20px;
        }

        .restart-btn {
            background: #4ecdc4;
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 18px;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .restart-btn:hover {
            background: #45b7aa;
            transform: scale(1.05);
        }

        .start-screen {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.9);
            color: white;
            padding: 40px;
            border-radius: 20px;
            text-align: center;
            pointer-events: all;
        }

        .start-screen h1 {
            font-size: 48px;
            margin-bottom: 20px;
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4, #45b7aa);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .start-screen p {
            font-size: 18px;
            margin-bottom: 30px;
        }

        .start-btn {
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
            color: white;
            border: none;
            padding: 20px 40px;
            font-size: 20px;
            border-radius: 30px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .start-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .instructions {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            color: white;
            text-align: center;
            font-size: 16px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
        }
    </style>
</head>
<body>
    <div class="game-container">
        <canvas id="gameCanvas" width="800" height="400"></canvas>
        
        <div class="ui-overlay">
            <div class="score" id="score">Score: 0</div>
            
            <div class="start-screen" id="startScreen">
                <h1>DULUTH HARBOR QUEST</h1>
                <p>Help the fish jump between boats in Duluth Harbor!</p>
                <p style="font-size: 14px; margin-top: 10px;">Triple jump available!</p>
                <button class="start-btn" onclick="startGame()">START GAME</button>
            </div>
            
            <div class="game-over" id="gameOver">
                <h2>GAME OVER!</h2>
                <p>Final Score: <span id="finalScore">0</span></p>
                <button class="restart-btn" onclick="restartGame()">PLAY AGAIN</button>
            </div>
            
            <div class="instructions" id="instructions" style="display: none;">
                Press SPACE or CLICK to JUMP!<br>
                Help the fish jump between boats!<br>
                You can triple jump in mid-air!
            </div>
        </div>
    </div>

    <script>
        // Game variables
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        
        let gameState = 'start'; // 'start', 'playing', 'gameOver'
        let score = 0;
        let gameSpeed = 3;
        let cameraX = 0;
        
        // Player object
        const player = {
            x: 100,
            y: 300,
            width: 30,
            height: 30,
            velocityY: 0,
            isJumping: false,
            canDoubleJump: true,
            canTripleJump: true,
            color: '#ff6b6b'
        };
        
        // Game objects
        let obstacles = [];
        let particles = [];
        let backgroundObjects = [];
        
        // Physics constants - adjusted for better gameplay
        const GRAVITY = 0.5;  // Slightly increased gravity for more responsive feel
        const JUMP_FORCE = -13; // Slightly increased jump force for better timing
        const GROUND_Y = 350;
        
        // Initialize background objects - Duluth harbor theme
        function initBackground() {
            backgroundObjects = [];
            // Add realistic ships in the background (sideways view)
            for (let i = 0; i < 8; i++) {
                backgroundObjects.push({
                    x: i * 400,
                    y: Math.random() * 100 + 120,
                    width: Math.random() * 60 + 80,
                    height: Math.random() * 20 + 15,
                    type: 'ship',
                    color: '#2c3e50'
                });
            }
            // Add lighthouse
            backgroundObjects.push({
                x: 500,
                y: 50,
                width: 20,
                height: 200,
                type: 'lighthouse',
                color: '#ff6b6b'
            });
        }
        
        // Create obstacle - Duluth harbor themed
        function createObstacle() {
            const types = ['boat', 'sailboat', 'buoy', 'crane', 'tugboat', 'fishing_boat'];
            const type = types[Math.floor(Math.random() * types.length)];
            
            let obstacle = {
                x: canvas.width + 100,
                y: GROUND_Y,
                width: 40,
                height: 50,
                type: type,
                color: '#2c3e50',
                isMoving: false,
                moveSpeed: 0,
                moveDirection: 1
            };
            
            if (type === 'boat') {
                obstacle.width = 100;
                obstacle.height = 25;
                obstacle.y = GROUND_Y + 15;
                obstacle.color = '#2c3e50';
                obstacle.isMoving = Math.random() < 0.3; // 30% chance to be moving
                obstacle.moveSpeed = 0.5;
            } else if (type === 'sailboat') {
                obstacle.width = 60;
                obstacle.height = 20;
                obstacle.y = GROUND_Y + 20;
                obstacle.color = '#8b4513';
                obstacle.isMoving = Math.random() < 0.4; // 40% chance to be moving
                obstacle.moveSpeed = 0.3;
            } else if (type === 'buoy') {
                obstacle.width = 20;
                obstacle.height = 30;
                obstacle.y = GROUND_Y + 10;
                obstacle.color = '#ff6b6b';
                obstacle.isMoving = Math.random() < 0.2; // 20% chance to be moving
                obstacle.moveSpeed = 0.2;
            } else if (type === 'tugboat') {
                obstacle.width = 70;
                obstacle.height = 20;
                obstacle.y = GROUND_Y + 18;
                obstacle.color = '#34495e';
                obstacle.isMoving = Math.random() < 0.4; // 40% chance to be moving
                obstacle.moveSpeed = 0.4;
            } else if (type === 'fishing_boat') {
                obstacle.width = 90;
                obstacle.height = 22;
                obstacle.y = GROUND_Y + 16;
                obstacle.color = '#2c3e50';
                obstacle.isMoving = Math.random() < 0.3; // 30% chance to be moving
                obstacle.moveSpeed = 0.3;
            } else if (type === 'crane') {
                obstacle.width = 20;
                obstacle.height = 60;
                obstacle.y = GROUND_Y - 10;
                obstacle.color = '#7f8c8d';
            }
            
            obstacles.push(obstacle);
        }
        
        // Create particle effect
        function createParticles(x, y, color) {
            for (let i = 0; i < 10; i++) {
                particles.push({
                    x: x,
                    y: y,
                    velocityX: (Math.random() - 0.5) * 10,
                    velocityY: (Math.random() - 0.5) * 10,
                    life: 30,
                    maxLife: 30,
                    color: color,
                    size: Math.random() * 4 + 2
                });
            }
        }
        
        // Jump function with double and triple jump
        function jump() {
            if (gameState !== 'playing') return;
            
            if (!player.isJumping) {
                // First jump
                player.velocityY = JUMP_FORCE;
                player.isJumping = true;
                player.canDoubleJump = true;
                player.canTripleJump = true;
            } else if (player.canDoubleJump && player.velocityY > -3) {
                // Double jump - can be used earlier in the jump
                player.velocityY = JUMP_FORCE * 0.9; // Stronger double jump
                player.canDoubleJump = false;
            } else if (player.canTripleJump && player.velocityY > -1) {
                // Triple jump - can be used even later in the jump
                player.velocityY = JUMP_FORCE * 0.8; // Slightly weaker triple jump
                player.canTripleJump = false;
            }
        }
        
        // Update player physics
        function updatePlayer() {
            if (gameState !== 'playing') return;
            
            // Apply gravity
            player.velocityY += GRAVITY;
            player.y += player.velocityY;
            
            // Ground collision
            if (player.y >= GROUND_Y) {
                player.y = GROUND_Y;
                player.velocityY = 0;
                player.isJumping = false;
                player.canDoubleJump = true; // Reset double jump when on ground
                player.canTripleJump = true; // Reset triple jump when on ground
            }
        }
        
        // Update obstacles
        function updateObstacles() {
            if (gameState !== 'playing') return;
            
            // Move obstacles
            obstacles.forEach(obstacle => {
                obstacle.x -= gameSpeed;
                
                // Handle moving boats
                if (obstacle.isMoving) {
                    obstacle.y += obstacle.moveSpeed * obstacle.moveDirection;
                    
                    // Reverse direction when hitting water surface or going too high
                    if (obstacle.y >= GROUND_Y + 20 || obstacle.y <= GROUND_Y - 10) {
                        obstacle.moveDirection *= -1;
                    }
                }
            });
            
            // Remove off-screen obstacles and update score
            const obstaclesBefore = obstacles.length;
            obstacles = obstacles.filter(obstacle => obstacle.x > -obstacle.width);
            const obstaclesAfter = obstacles.length;
            
            // Add to score for each obstacle cleared
            if (obstaclesBefore > obstaclesAfter) {
                score += 10; // 10 points per obstacle cleared
            }
            
            // Create new obstacles - increased frequency for faster gameplay
            if (Math.random() < 0.015) {
                createObstacle();
            }
            
            // Increase game speed over time
            gameSpeed += 0.001;
        }
        
        // Update particles
        function updateParticles() {
            particles.forEach(particle => {
                particle.x += particle.velocityX;
                particle.y += particle.velocityY;
                particle.velocityY += 0.3; // gravity
                particle.life--;
            });
            
            particles = particles.filter(particle => particle.life > 0);
        }
        
        // Check collisions
        function checkCollisions() {
            obstacles.forEach(obstacle => {
                if (player.x < obstacle.x + obstacle.width &&
                    player.x + player.width > obstacle.x &&
                    player.y < obstacle.y + obstacle.height &&
                    player.y + player.height > obstacle.y) {
                    gameOver();
                }
            });
        }
        
        // Game over function
        function gameOver() {
            gameState = 'gameOver';
            document.getElementById('gameOver').style.display = 'block';
            document.getElementById('finalScore').textContent = score;
            createParticles(player.x + player.width/2, player.y + player.height/2, player.color);
        }
        
        // Start game
        function startGame() {
            gameState = 'playing';
            document.getElementById('startScreen').style.display = 'none';
            document.getElementById('instructions').style.display = 'block';
            
            // Hide instructions after 3 seconds
            setTimeout(() => {
                document.getElementById('instructions').style.display = 'none';
            }, 3000);
            
            resetGame();
        }
        
        // Restart game
        function restartGame() {
            document.getElementById('gameOver').style.display = 'none';
            document.getElementById('startScreen').style.display = 'block';
            document.getElementById('instructions').style.display = 'none';
            resetGame();
        }
        
        // Reset game variables
        function resetGame() {
            score = 0;
            gameSpeed = 3;
            cameraX = 0;
            player.x = 100;
            player.y = 300;
            player.velocityY = 0;
            player.isJumping = false;
            player.canDoubleJump = true;
            player.canTripleJump = true;
            obstacles = [];
            particles = [];
            initBackground();
        }
        
        // Draw functions
        function drawBackground() {
            // Duluth harbor sky gradient
            const gradient = ctx.createLinearGradient(0, 0, 0, canvas.height);
            gradient.addColorStop(0, '#87CEEB'); // Sky blue
            gradient.addColorStop(0.3, '#B0E0E6'); // Light blue
            gradient.addColorStop(0.7, '#4682B4'); // Steel blue
            gradient.addColorStop(1, '#2F4F4F'); // Dark slate gray
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // Background objects - ships and lighthouse
            backgroundObjects.forEach(obj => {
                ctx.fillStyle = obj.color;
                if (obj.type === 'ship') {
                    // Draw realistic ship (sideways view) - like a cargo ship
                    const shipX = obj.x - cameraX * 0.3;
                    const shipY = obj.y;
                    const shipW = obj.width;
                    const shipH = obj.height;
                    
                    // Ship hull (dark blue/gray)
                    ctx.fillStyle = '#2F4F4F';
                    ctx.beginPath();
                    ctx.moveTo(shipX, shipY + shipH);
                    ctx.quadraticCurveTo(shipX + shipW/2, shipY + shipH/2, shipX + shipW, shipY + shipH);
                    ctx.lineTo(shipX + shipW, shipY);
                    ctx.quadraticCurveTo(shipX + shipW/2, shipY - shipH/3, shipX, shipY);
                    ctx.closePath();
                    ctx.fill();
                    
                    // Ship deck (wooden)
                    ctx.fillStyle = '#8B4513';
                    ctx.fillRect(shipX + 5, shipY - 6, shipW - 10, 6);
                    
                    // Ship superstructure (white)
                    ctx.fillStyle = '#FFFFFF';
                    ctx.fillRect(shipX + 15, shipY - 12, shipW - 30, 6);
                    
                    // Ship bridge (white with windows)
                    ctx.fillStyle = '#FFFFFF';
                    ctx.fillRect(shipX + 20, shipY - 18, shipW - 40, 6);
                    
                    // Ship windows
                    ctx.fillStyle = '#87CEEB';
                    ctx.fillRect(shipX + 25, shipY - 15, 3, 3);
                    ctx.fillRect(shipX + shipW - 28, shipY - 15, 3, 3);
                    
                    // Ship mast
                    ctx.fillStyle = '#8B4513';
                    ctx.fillRect(shipX + shipW/2 - 1, shipY - 25, 2, 7);
                    
                    // Ship flag
                    ctx.fillStyle = '#FF0000';
                    ctx.fillRect(shipX + shipW/2 + 1, shipY - 28, 4, 3);
                    
                    // Ship cargo containers (colored boxes)
                    ctx.fillStyle = '#FF0000';
                    ctx.fillRect(shipX + 10, shipY - 8, 8, 4);
                    ctx.fillStyle = '#00FF00';
                    ctx.fillRect(shipX + 20, shipY - 8, 8, 4);
                    ctx.fillStyle = '#0000FF';
                    ctx.fillRect(shipX + shipW - 30, shipY - 8, 8, 4);
                    
                } else if (obj.type === 'lighthouse') {
                    // Draw lighthouse
                    ctx.fillRect(obj.x - cameraX * 0.2, obj.y, obj.width, obj.height);
                    // Draw lighthouse top
                    ctx.fillStyle = '#ff6b6b';
                    ctx.fillRect(obj.x - cameraX * 0.2 - 5, obj.y, obj.width + 10, 20);
                }
            });
            
            // Water surface
            ctx.fillStyle = '#4682B4';
            ctx.fillRect(0, GROUND_Y, canvas.width, canvas.height - GROUND_Y);
            
            // Water waves
            ctx.strokeStyle = '#5F9EA0';
            ctx.lineWidth = 2;
            for (let i = 0; i < canvas.width; i += 20) {
                ctx.beginPath();
                ctx.moveTo(i, GROUND_Y + Math.sin((i + cameraX * 0.1) * 0.1) * 5);
                ctx.lineTo(i + 20, GROUND_Y + Math.sin((i + 20 + cameraX * 0.1) * 0.1) * 5);
                ctx.stroke();
            }
        }
        
        function drawPlayer() {
            // Draw fish character
            ctx.fillStyle = '#ff6b6b';
            ctx.beginPath();
            ctx.ellipse(player.x + player.width/2, player.y + player.height/2, player.width/2, player.height/2, 0, 0, 2 * Math.PI);
            ctx.fill();
            
            // Fish tail
            ctx.fillStyle = '#ff6b6b';
            ctx.beginPath();
            ctx.moveTo(player.x, player.y + player.height/2);
            ctx.lineTo(player.x - 15, player.y + 5);
            ctx.lineTo(player.x - 15, player.y + player.height - 5);
            ctx.closePath();
            ctx.fill();
            
            // Fish eye
            ctx.fillStyle = 'white';
            ctx.beginPath();
            ctx.arc(player.x + player.width/2 + 5, player.y + player.height/2 - 5, 6, 0, 2 * Math.PI);
            ctx.fill();
            
            ctx.fillStyle = 'black';
            ctx.beginPath();
            ctx.arc(player.x + player.width/2 + 7, player.y + player.height/2 - 3, 3, 0, 2 * Math.PI);
            ctx.fill();
        }
        
        function drawObstacles() {
            obstacles.forEach(obstacle => {
                ctx.fillStyle = obstacle.color;
                
                if (obstacle.type === 'boat') {
                    // Draw realistic boat hull (sideways view) - like a fishing boat
                    ctx.fillStyle = '#8B4513'; // Brown wooden hull
                    ctx.beginPath();
                    ctx.moveTo(obstacle.x, obstacle.y + obstacle.height);
                    ctx.quadraticCurveTo(obstacle.x + obstacle.width/2, obstacle.y + obstacle.height/2, obstacle.x + obstacle.width, obstacle.y + obstacle.height);
                    ctx.lineTo(obstacle.x + obstacle.width, obstacle.y);
                    ctx.quadraticCurveTo(obstacle.x + obstacle.width/2, obstacle.y - obstacle.height/3, obstacle.x, obstacle.y);
                    ctx.closePath();
                    ctx.fill();
                    
                    // Draw boat deck (wooden)
                    ctx.fillStyle = '#D2691E';
                    ctx.fillRect(obstacle.x + 5, obstacle.y - 8, obstacle.width - 10, 8);
                    
                    // Draw boat cabin (white with windows)
                    ctx.fillStyle = '#FFFFFF';
                    ctx.fillRect(obstacle.x + 15, obstacle.y - 18, obstacle.width - 30, 10);
                    
                    // Draw cabin windows
                    ctx.fillStyle = '#87CEEB';
                    ctx.fillRect(obstacle.x + 18, obstacle.y - 15, 4, 4);
                    ctx.fillRect(obstacle.x + obstacle.width - 22, obstacle.y - 15, 4, 4);
                    
                    // Draw boat railings
                    ctx.strokeStyle = '#8B4513';
                    ctx.lineWidth = 2;
                    ctx.beginPath();
                    ctx.moveTo(obstacle.x + 8, obstacle.y - 5);
                    ctx.lineTo(obstacle.x + obstacle.width - 8, obstacle.y - 5);
                    ctx.stroke();
                    
                    // Draw boat flag
                    ctx.fillStyle = '#FF0000';
                    ctx.fillRect(obstacle.x + obstacle.width - 8, obstacle.y - 25, 6, 4);
                    
                    // Draw boat anchor
                    ctx.fillStyle = '#696969';
                    ctx.fillRect(obstacle.x + 5, obstacle.y - 3, 3, 3);
                    
                } else if (obstacle.type === 'sailboat') {
                    // Draw sailboat hull (sideways view) - like a classic sailboat
                    ctx.fillStyle = '#8B4513'; // Brown wooden hull
                    ctx.beginPath();
                    ctx.moveTo(obstacle.x, obstacle.y + obstacle.height);
                    ctx.quadraticCurveTo(obstacle.x + obstacle.width/2, obstacle.y + obstacle.height/2, obstacle.x + obstacle.width, obstacle.y + obstacle.height);
                    ctx.lineTo(obstacle.x + obstacle.width, obstacle.y);
                    ctx.quadraticCurveTo(obstacle.x + obstacle.width/2, obstacle.y - obstacle.height/3, obstacle.x, obstacle.y);
                    ctx.closePath();
                    ctx.fill();
                    
                    // Draw sailboat deck
                    ctx.fillStyle = '#D2691E';
                    ctx.fillRect(obstacle.x + 3, obstacle.y - 6, obstacle.width - 6, 6);
                    
                    // Draw mast (tall wooden pole)
                    ctx.fillStyle = '#8B4513';
                    ctx.fillRect(obstacle.x + obstacle.width/2 - 1, obstacle.y - 35, 2, 35);
                    
                    // Draw main sail (white triangular sail)
                    ctx.fillStyle = '#FFFFFF';
                    ctx.beginPath();
                    ctx.moveTo(obstacle.x + obstacle.width/2, obstacle.y - 35);
                    ctx.lineTo(obstacle.x + obstacle.width - 5, obstacle.y - 8);
                    ctx.lineTo(obstacle.x + obstacle.width/2, obstacle.y - 8);
                    ctx.closePath();
                    ctx.fill();
                    
                    // Draw sail stripes (red and blue)
                    ctx.fillStyle = '#FF0000';
                    ctx.fillRect(obstacle.x + obstacle.width/2 + 2, obstacle.y - 30, 8, 2);
                    ctx.fillStyle = '#0000FF';
                    ctx.fillRect(obstacle.x + obstacle.width/2 + 2, obstacle.y - 25, 8, 2);
                    
                    // Draw jib sail (smaller triangular sail)
                    ctx.fillStyle = '#F0F8FF';
                    ctx.beginPath();
                    ctx.moveTo(obstacle.x + obstacle.width/2, obstacle.y - 30);
                    ctx.lineTo(obstacle.x + obstacle.width - 3, obstacle.y - 8);
                    ctx.lineTo(obstacle.x + obstacle.width/2, obstacle.y - 8);
                    ctx.closePath();
                    ctx.fill();
                    
                    // Draw flag on mast
                    ctx.fillStyle = '#FF0000';
                    ctx.fillRect(obstacle.x + obstacle.width/2 + 1, obstacle.y - 38, 4, 3);
                    
                } else if (obstacle.type === 'buoy') {
                    // Draw buoy (spherical shape) - like a navigation buoy
                    ctx.fillStyle = '#FF0000'; // Red buoy
                    ctx.beginPath();
                    ctx.arc(obstacle.x + obstacle.width/2, obstacle.y + obstacle.height/2, obstacle.width/2, 0, 2 * Math.PI);
                    ctx.fill();
                    
                    // Draw buoy white stripe
                    ctx.fillStyle = '#FFFFFF';
                    ctx.fillRect(obstacle.x + 2, obstacle.y + obstacle.height/2 - 3, obstacle.width - 4, 6);
                    
                    // Draw buoy top (white)
                    ctx.fillStyle = '#FFFFFF';
                    ctx.beginPath();
                    ctx.arc(obstacle.x + obstacle.width/2, obstacle.y + obstacle.height/2 - 5, 3, 0, 2 * Math.PI);
                    ctx.fill();
                    
                    // Draw buoy anchor chain
                    ctx.strokeStyle = '#8B4513';
                    ctx.lineWidth = 1;
                    ctx.beginPath();
                    ctx.moveTo(obstacle.x + obstacle.width/2, obstacle.y + obstacle.height/2 + obstacle.width/2);
                    ctx.lineTo(obstacle.x + obstacle.width/2, obstacle.y + obstacle.height/2 + obstacle.width/2 + 10);
                    ctx.stroke();
                    
                } else if (obstacle.type === 'tugboat') {
                    // Draw tugboat (sideways view) - like a harbor tug
                    ctx.fillStyle = '#FF0000'; // Red hull
                    ctx.beginPath();
                    ctx.moveTo(obstacle.x, obstacle.y + obstacle.height);
                    ctx.quadraticCurveTo(obstacle.x + obstacle.width/2, obstacle.y + obstacle.height/2, obstacle.x + obstacle.width, obstacle.y + obstacle.height);
                    ctx.lineTo(obstacle.x + obstacle.width, obstacle.y);
                    ctx.quadraticCurveTo(obstacle.x + obstacle.width/2, obstacle.y - obstacle.height/3, obstacle.x, obstacle.y);
                    ctx.closePath();
                    ctx.fill();
                    
                    // Draw tugboat deck
                    ctx.fillStyle = '#8B4513';
                    ctx.fillRect(obstacle.x + 3, obstacle.y - 6, obstacle.width - 6, 6);
                    
                    // Draw tugboat cabin (white with windows)
                    ctx.fillStyle = '#FFFFFF';
                    ctx.fillRect(obstacle.x + 8, obstacle.y - 15, obstacle.width - 16, 9);
                    
                    // Draw cabin windows
                    ctx.fillStyle = '#87CEEB';
                    ctx.fillRect(obstacle.x + 12, obstacle.y - 12, 3, 3);
                    ctx.fillRect(obstacle.x + obstacle.width - 15, obstacle.y - 12, 3, 3);
                    
                    // Draw tugboat smokestack
                    ctx.fillStyle = '#696969';
                    ctx.fillRect(obstacle.x + obstacle.width/2 - 2, obstacle.y - 20, 4, 5);
                    
                    // Draw tugboat flag
                    ctx.fillStyle = '#0000FF';
                    ctx.fillRect(obstacle.x + obstacle.width - 6, obstacle.y - 18, 4, 3);
                    
                    // Draw tugboat railings
                    ctx.strokeStyle = '#8B4513';
                    ctx.lineWidth = 1;
                    ctx.beginPath();
                    ctx.moveTo(obstacle.x + 5, obstacle.y - 3);
                    ctx.lineTo(obstacle.x + obstacle.width - 5, obstacle.y - 3);
                    ctx.stroke();
                    
                } else if (obstacle.type === 'fishing_boat') {
                    // Draw fishing boat (sideways view) - like a working fishing vessel
                    ctx.fillStyle = '#0000FF'; // Blue hull
                    ctx.beginPath();
                    ctx.moveTo(obstacle.x, obstacle.y + obstacle.height);
                    ctx.quadraticCurveTo(obstacle.x + obstacle.width/2, obstacle.y + obstacle.height/2, obstacle.x + obstacle.width, obstacle.y + obstacle.height);
                    ctx.lineTo(obstacle.x + obstacle.width, obstacle.y);
                    ctx.quadraticCurveTo(obstacle.x + obstacle.width/2, obstacle.y - obstacle.height/3, obstacle.x, obstacle.y);
                    ctx.closePath();
                    ctx.fill();
                    
                    // Draw fishing boat deck
                    ctx.fillStyle = '#8B4513';
                    ctx.fillRect(obstacle.x + 5, obstacle.y - 8, obstacle.width - 10, 8);
                    
                    // Draw fishing boat cabin (white)
                    ctx.fillStyle = '#FFFFFF';
                    ctx.fillRect(obstacle.x + 10, obstacle.y - 16, obstacle.width - 20, 8);
                    
                    // Draw cabin windows
                    ctx.fillStyle = '#87CEEB';
                    ctx.fillRect(obstacle.x + 15, obstacle.y - 13, 4, 4);
                    ctx.fillRect(obstacle.x + obstacle.width - 19, obstacle.y - 13, 4, 4);
                    
                    // Draw fishing boat mast
                    ctx.fillStyle = '#8B4513';
                    ctx.fillRect(obstacle.x + obstacle.width/2 - 1, obstacle.y - 25, 2, 17);
                    
                    // Draw fishing nets (brown lines)
                    ctx.strokeStyle = '#8B4513';
                    ctx.lineWidth = 1;
                    ctx.beginPath();
                    ctx.moveTo(obstacle.x + 15, obstacle.y - 5);
                    ctx.lineTo(obstacle.x + obstacle.width - 15, obstacle.y - 5);
                    ctx.moveTo(obstacle.x + 20, obstacle.y - 3);
                    ctx.lineTo(obstacle.x + obstacle.width - 20, obstacle.y - 3);
                    ctx.stroke();
                    
                    // Draw fishing boat flag
                    ctx.fillStyle = '#FF0000';
                    ctx.fillRect(obstacle.x + obstacle.width - 8, obstacle.y - 20, 5, 4);
                    
                    // Draw fishing boat anchor
                    ctx.fillStyle = '#696969';
                    ctx.fillRect(obstacle.x + 8, obstacle.y - 3, 4, 3);
                    
                } else if (obstacle.type === 'crane') {
                    // Draw crane
                    ctx.fillRect(obstacle.x, obstacle.y, obstacle.width, obstacle.height);
                    // Draw crane arm
                    ctx.fillRect(obstacle.x - 30, obstacle.y + 10, 60, 8);
                } else {
                    // Default block
                    ctx.fillRect(obstacle.x, obstacle.y, obstacle.width, obstacle.height);
                }
            });
        }
        
        function drawParticles() {
            particles.forEach(particle => {
                const alpha = particle.life / particle.maxLife;
                ctx.globalAlpha = alpha;
                ctx.fillStyle = particle.color;
                ctx.fillRect(particle.x, particle.y, particle.size, particle.size);
            });
            ctx.globalAlpha = 1;
        }
        
        function drawUI() {
            // Score
            document.getElementById('score').textContent = `Score: ${Math.floor(score)}`;
        }
        
        // Main game loop
        function gameLoop() {
            // Clear canvas
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Draw background
            drawBackground();
            
            if (gameState === 'playing') {
                // Update game objects
                updatePlayer();
                updateObstacles();
                updateParticles();
                checkCollisions();
                
                // Update camera
                cameraX += gameSpeed;
            }
            
            // Draw game objects
            drawPlayer();
            drawObstacles();
            drawParticles();
            drawUI();
            
            // Continue game loop
            requestAnimationFrame(gameLoop);
        }
        
        // Event listeners
        document.addEventListener('keydown', (e) => {
            if (e.code === 'Space') {
                e.preventDefault();
                jump();
            }
        });
        
        canvas.addEventListener('click', () => {
            jump();
        });
        
        // Initialize game
        initBackground();
        gameLoop();
    </script>
</body>
</html>
